{% extends "header_footer.html" %}

{% load static %}
    <!-- End Breadcrumb section -->
{% block title%}User Auction{%endblock%}
{%block extra_css%}
 <style>
        h1 {
            text-align: center;
            color: #495057;
            margin-bottom: 25px;
        }
        
        /* Form Styling */
        form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
        }
        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box; /* Important */
            transition: border-color 0.2s;
        }
        .form-control:focus {
            border-color: #80bdff;
            outline: none;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
        }

        /* Submit Button */
        .submit-btn {
            padding: 12px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .submit-btn:hover {
            background-color: #218838;
        }
    </style>
{%endblock%}
{%block content%}
    <!-- Start Breadcrumb section -->
    <div class="breadcrumb-section seven" style="background-image:url({% static 'assets/img/inner-pages/breadcrumb-bg7.png' %});">  
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="banner-content">
                        <h1>Profile</h1>
                        <ul class="breadcrumb-list">
                            <li><a href="{% url 'home' %}">Home</a></li>
                            <li>Profile</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Start Dashboard section -->
    {% include "dashboard-menu.html" %}
                <div class="dashboard-content-wrap">
                    <div class="my-auction-wrap">
                        <h6>My Auction</h6>
                        {% if user.account_type == "Seller"%}
                            <ul class="nav nav-pills" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="pills-show-product-tab" data-bs-toggle="pill" data-bs-target="#pills-show-product" type="button" role="tab" aria-controls="pills-show-product" aria-selected="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-grid" viewBox="0 0 16 16">
                                    <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"/>
                                </svg>
                                Show Products
                            </button>
                            </li>
                            <li class="nav-item" role="presentation">
                              <button class="nav-link" id="pills-add-product-tab" data-bs-toggle="pill" data-bs-target="#pills-add-product" type="button" role="tab" aria-controls="pills-add-product" aria-selected="false">
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14" x="0" y="0" viewBox="0 0 512.001 512.001" xml:space="preserve" class="">
                                    <g>
                                        <path
                                            d="M315.001 481.91h-16.518c-6.969-34.191-37.266-60-73.482-60h-120c-36.216 0-66.513 25.809-73.482 60H15.001c-8.291 0-15 6.709-15 15s6.709 15 15 15h300c8.291 0 15-6.709 15-15s-6.709-15-15-15zM390.626 136.156 263.347 8.878c-11.717-11.717-30.712-11.717-42.427 0-11.715 11.715-11.715 30.71 0 42.426L348.2 178.583c11.715 11.715 30.71 11.715 42.426 0 11.715-11.717 11.715-30.71 0-42.427zM178.494 348.289l-127.28-127.28c-11.715-11.715-30.71-11.715-42.426 0-11.717 11.715-11.717 30.71 0 42.427l127.279 127.279c11.717 11.715 30.71 11.715 42.427 0 11.715-11.715 11.715-30.71 0-42.426zM72.42 199.797 199.699 72.52l127.276 127.277-127.276 127.277zM498.822 435.091l-21.343-23.163-63.64 63.64 21.343 23.163c17.574 17.573 46.066 17.573 63.64 0 17.573-17.574 17.573-46.066 0-63.64zM355.555 292.004c2.529-9.922.411-20.802-7.355-28.568-11.717-11.717-30.712-11.717-42.427 0l-42.426 42.426c-11.717 11.715-11.717 30.71 0 42.427 7.766 7.766 18.647 9.884 28.568 7.355l100.71 98.71 63.64-63.64-100.71-98.71z" opacity="1" data-original="#000000"></path>
                                    </g>
                                </svg>
                                Add Product
                            </button>
                            </li>
                        </ul>
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade" id="pills-add-product" role="tabpanel" aria-labelledby="pills-add-product-tab">
                                <div class="row g-4">
                                    <div class="col-lg-12">
                                    <div class="add-product-form-container">
                                        <form method="post" enctype="multipart/form-data">
                                            {% csrf_token %}

                                            {{ form.non_field_errors }}

                                            <div class="form-group">
                                                <label>{{ form.product_name.label_tag }}</label>
                                                {{ form.product_name }}
                                                {{ form.product_name.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.sub_description.label_tag }}</label>
                                                {{ form.sub_description }}
                                                {{ form.sub_description.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.product_description.label_tag }}</label>
                                                {{ form.product_description }}
                                                {{ form.product_description.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.start_price.label_tag }}</label>
                                                {{ form.start_price }}
                                                {{ form.start_price.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.auction_start_date_time.label_tag }}</label>
                                                {{ form.auction_start_date_time }}
                                                {{ form.auction_start_date_time.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.auction_end_date_time.label_tag }}</label>
                                                {{ form.auction_end_date_time }}
                                                {{ form.auction_end_date_time.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.category.label_tag }}</label>
                                                {{ form.category }}
                                                {{ form.category.errors }}
                                            </div>
                                            <div class="form-group">
                                                <label>{{ form.main_image.label_tag }}</label>
                                                {{ form.main_image }}
                                                {{ form.main_image.errors }}
                                            </div>

                                            <div class="form-group">
                                                <label for="gallery_images">Gallery Images (Optional, up to 5):</label>
                                                <input type="file" name="gallery_images" id="gallery_images" multiple>
                                                {{ form.gallery_images_upload.errors }}
                                            </div>
                                            <button type="submit" class="submit-btn" style="background-color:black">Add Product</button>
                                        </form>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade show active" id="pills-show-product" role="tabpanel" aria-labelledby="pills-show-product-tab">
                                <div class="row g-4">
                                    {% if seller_products %}
                                        {% for product in seller_products %}
                                        <div class="col-lg-4 col-md-6" data-wow-delay="200ms" data-wow-duration="1500ms">
                                                <div class="auction-card style-7">
                                                    <div class="auction-card-img-wrap">
                                                        <a href="{% url 'auction-details' product.id %}" class="card-img">
                                                            {% if product.main_image %}
                                                            <!-- REMOVED width/height attributes and ADDED a class -->
                                                            <img class="product-card-image" src="{{ product.main_image.url }}" alt="{{ product.product_name }}">
                                                            {% else %}
                                                            <img class="product-card-image" src="{% static 'images/default-product.jpg' %}" alt="No image">
                                                            {% endif %}
                                                        </a>

                                                        <div class="batch">
                                                            {% if product.auction_status == "live" %}
                                                                <span class="live">
                                                                    <svg width="11" height="11" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg"><path d="M10.6777 11H4.83398C4.65599 11 4.51172 10.8557 4.51172 10.6777V10.334C4.51172 9.97798 4.80025 9.68944 5.15625 9.68944V9.30414C5.15625 8.79397 5.57133 8.37889 6.0815 8.37889H9.43022C9.94039 8.37889 10.3555 8.79397 10.3555 9.30414V9.68944C10.7115 9.68944 11 9.97798 11 10.334V10.6777C11 10.8556 10.8556 11 10.6777 11ZM6.96665 7.09722C6.75245 7.38146 6.34829 7.43829 6.06405 7.22402C5.77973 7.00985 5.72299 6.60568 5.93716 6.32134L7.8766 3.74766C8.09087 3.46333 8.49494 3.40659 8.7792 3.62077C9.06353 3.83503 9.12035 4.23911 8.90609 4.52346L6.96665 7.09722ZM2.334 3.60618C2.11973 3.89042 1.71563 3.94725 1.43131 3.73298C1.14707 3.51881 1.09025 3.11473 1.30451 2.83038L3.24397 0.256726C3.45815 -0.027598 3.86231 -0.0844241 4.14657 0.12984C4.43081 0.344103 4.48763 0.748181 4.27337 1.03253L2.334 3.60618ZM3.74767 5.4785C3.27134 5.11956 2.91373 4.67385 2.69008 4.20454L4.94678 1.20984C5.45955 1.29552 5.98651 1.51631 6.46293 1.87534C6.93928 2.23428 7.29689 2.67999 7.52054 3.14921L5.26382 6.14409C4.75108 6.05841 4.22411 5.83751 3.74767 5.4785ZM2.87749 5.56242C3.02753 5.71533 3.18557 5.86196 3.35979 5.99329C3.53409 6.12456 3.71864 6.23606 3.90689 6.33822L3.48668 6.89589L2.45719 6.12018L2.87749 5.56242ZM2.06929 6.63488L3.09878 7.41059L1.15932 9.98436C0.945055 10.2687 0.540977 10.3254 0.256717 10.1112C-0.027607 9.89698 -0.0843477 9.4929 0.12983 9.20856L2.06929 6.63488Z" /></svg> Live
                                                                </span>

                                                            {% elif product.auction_status == "upcoming" %}
                                                                <span style="color:#ffffff;background-color:#00b4d8;">
                                                                    <svg width="11" height="11" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg"><path d="M10.6777 11H4.83398C4.65599 11 4.51172 10.8557 4.51172 10.6777V10.334C4.51172 9.97798 4.80025 9.68944 5.15625 9.68944V9.30414C5.15625 8.79397 5.57133 8.37889 6.0815 8.37889H9.43022C9.94039 8.37889 10.3555 8.79397 10.3555 9.30414V9.68944C10.7115 9.68944 11 9.97798 11 10.334V10.6777C11 10.8556 10.8556 11 10.6777 11ZM6.96665 7.09722C6.75245 7.38146 6.34829 7.43829 6.06405 7.22402C5.77973 7.00985 5.72299 6.60568 5.93716 6.32134L7.8766 3.74766C8.09087 3.46333 8.49494 3.40659 8.7792 3.62077C9.06353 3.83503 9.12035 4.23911 8.90609 4.52346L6.96665 7.09722ZM2.334 3.60618C2.11973 3.89042 1.71563 3.94725 1.43131 3.73298C1.14707 3.51881 1.09025 3.11473 1.30451 2.83038L3.24397 0.256726C3.45815 -0.027598 3.86231 -0.0844241 4.14657 0.12984C4.43081 0.344103 4.48763 0.748181 4.27337 1.03253L2.334 3.60618ZM3.74767 5.4785C3.27134 5.11956 2.91373 4.67385 2.69008 4.20454L4.94678 1.20984C5.45955 1.29552 5.98651 1.51631 6.46293 1.87534C6.93928 2.23428 7.29689 2.67999 7.52054 3.14921L5.26382 6.14409C4.75108 6.05841 4.22411 5.83751 3.74767 5.4785ZM2.87749 5.56242C3.02753 5.71533 3.18557 5.86196 3.35979 5.99329C3.53409 6.12456 3.71864 6.23606 3.90689 6.33822L3.48668 6.89589L2.45719 6.12018L2.87749 5.56242ZM2.06929 6.63488L3.09878 7.41059L1.15932 9.98436C0.945055 10.2687 0.540977 10.3254 0.256717 10.1112C-0.027607 9.89698 -0.0843477 9.4929 0.12983 9.20856L2.06929 6.63488Z" /></svg> Upcoming
                                                                </span>

                                                            {% else %}
                                                                <span style="color:#ffffff;background-color:#6c757d;">
                                                                    <svg width="11" height="11" viewBox="0 0 11 11" xmlns="http://www.w3.org/2000/svg"><path d="M10.6777 11H4.83398C4.65599 11 4.51172 10.8557 4.51172 10.6777V10.334C4.51172 9.97798 4.80025 9.68944 5.15625 9.68944V9.30414C5.15625 8.79397 5.57133 8.37889 6.0815 8.37889H9.43022C9.94039 8.37889 10.3555 8.79397 10.3555 9.30414V9.68944C10.7115 9.68944 11 9.97798 11 10.334V10.6777C11 10.8556 10.8556 11 10.6777 11ZM6.96665 7.09722C6.75245 7.38146 6.34829 7.43829 6.06405 7.22402C5.77973 7.00985 5.72299 6.60568 5.93716 6.32134L7.8766 3.74766C8.09087 3.46333 8.49494 3.40659 8.7792 3.62077C9.06353 3.83503 9.12035 4.23911 8.90609 4.52346L6.96665 7.09722ZM2.334 3.60618C2.11973 3.89042 1.71563 3.94725 1.43131 3.73298C1.14707 3.51881 1.09025 3.11473 1.30451 2.83038L3.24397 0.256726C3.45815 -0.027598 3.86231 -0.0844241 4.14657 0.12984C4.43081 0.344103 4.48763 0.748181 4.27337 1.03253L2.334 3.60618ZM3.74767 5.4785C3.27134 5.11956 2.91373 4.67385 2.69008 4.20454L4.94678 1.20984C5.45955 1.29552 5.98651 1.51631 6.46293 1.87534C6.93928 2.23428 7.29689 2.67999 7.52054 3.14921L5.26382 6.14409C4.75108 6.05841 4.22411 5.83751 3.74767 5.4785ZM2.87749 5.56242C3.02753 5.71533 3.18557 5.86196 3.35979 5.99329C3.53409 6.12456 3.71864 6.23606 3.90689 6.33822L3.48668 6.89589L2.45719 6.12018L2.87749 5.56242ZM2.06929 6.63488L3.09878 7.41059L1.15932 9.98436C0.945055 10.2687 0.540977 10.3254 0.256717 10.1112C-0.027607 9.89698 -0.0843477 9.4929 0.12983 9.20856L2.06929 6.63488Z" /></svg> 
                                                                    Closed
                                                                </span>
                                                            {% endif %}
                                                        </div>
                                                        <ul class="view-and-favorite-area">
                                                            <li>
                                                                <a class="wishlist-toggle-btn 
                                                                    {% if product.id in user_wishlist_products %}active{% endif %}"
                                                                        href="{% url 'toggle_wishlist' product.id %}"
                                                                        aria-label="Toggle Wishlist">
                            
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="14" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                                                    <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                                                                    </svg>
                                                                </a>
                                                            </li>

                                                            <li>
                                                                <a href="{% url 'auction-details' product.id%}">
                                                                    <svg width="17" height="11" viewBox="0 0 17 11"
                                                                        xmlns="http://www.w3.org/2000/svg">
                                                                        <path fill-rule="evenodd" clip-rule="evenodd"
                                                                            d="M15.4028 5.44118C14.0143 7.8425 11.3811 9.33421 8.53217 9.33421C5.68139 9.33421 3.04821 7.8425 1.65968 5.44118C1.55274 5.25472 1.55274 5.05762 1.65968 4.87132C3.04821 2.47003 5.68139 0.978484 8.53217 0.978484C11.3811 0.978484 14.0143 2.47003 15.4028 4.87132C15.5116 5.05762 15.5116 5.25472 15.4028 5.44118ZM16.2898 4.39522C14.7224 1.68403 11.7499 0 8.53217 0C5.31258 0 2.3401 1.68403 0.772715 4.39522C0.492428 4.87896 0.492428 5.43355 0.772715 5.91693C2.3401 8.62812 5.31258 10.3125 8.53217 10.3125C11.7499 10.3125 14.7224 8.62812 16.2898 5.91693C16.5701 5.43358 16.5701 4.87896 16.2898 4.39522ZM8.53217 7.1634C9.68098 7.1634 10.6159 6.26305 10.6159 5.15617C10.6159 4.04929 9.68098 3.14894 8.53217 3.14894C7.38152 3.14894 6.44663 4.04929 6.44663 5.15617C6.44663 6.26305 7.38156 7.1634 8.53217 7.1634ZM8.53217 2.17045C6.82095 2.17045 5.43061 3.50998 5.43061 5.1562C5.43061 6.80278 6.82098 8.14176 8.53217 8.14176C10.2416 8.14176 11.6319 6.80275 11.6319 5.1562C11.6319 3.50998 10.2416 2.17045 8.53217 2.17045Z" />
                                                                    </svg>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                        <!-- Countdown Timer -->
                                                        {% if product.auction_status == "live" %}
                                                        <div class="countdown-timer">
                                                            <ul data-countdown="{{ product.countdown_start|date:'Y-m-d H:i:s' }}">
                                                                <li class="times" data-days="00">00</li>
                                                                <li class="colon">:</li>
                                                                <li class="times" data-hours="00">00</li>
                                                                <li class="colon">:</li>
                                                                <li class="times" data-minutes="00">00</li>
                                                                <li class="colon">:</li>
                                                                <li class="times" data-seconds="00">00</li>
                                                            </ul>
                                                        </div>
                                                        {%endif%}
                                                    </div>

                                                    <div class="auction-card-content">
                                                        <h6><a href="{% url 'auction-details' product.id %}">{{ product.product_name }}</a></h6>
                                                        <div class="price-and-code-area">
                                                            <div class="price">
                                                                {% if product.auction_status == "live" %}
                                                                    <span>Current Bid at:</span>
                                                                    <strong>₹{{ product.current_bid }}</strong>
                                                                {% elif product.auction_status == "closed" %}
                                                                    {%if product.is_sold %}
                                                                        <span class="text-danger">Sold Out:</span>
                                                                        <strong class="text-danger">₹{{ product.current_bid }}</strong>
                                                                    {%else%}
                                                                        <span class="text-danger">Not Sold</span>
                                                                        <strong class="text-danger">₹{{ product.current_bid }}</strong>
                                                                    {%endif%}
                                                                {%else%}
                                                                    <span style="color:#00b4d8;">Start Bid at:</span>
                                                                    <strong style="color:#00b4d8;">₹{{ product.start_price}}</strong>
                                                                {%endif%}
                                                            </div>
                                                            {% if product.auction_status == "live" %}
                                                                <a href="{% url 'auction-details' product.id %}" class="bid-btn">Bid Now</a>
                                                            {% elif product.auction_status == "closed" %}
                                                                {%if product.is_sold %}
                                                                    <a href="{% url 'auction-details' product.id %}" class="bid-btn">Sold Out</a>
                                                                    {%else%}
                                                                        <a class="bid-btn" style="background:#dc3545;">Not Sold</a>
                                                                {%endif%}
                                                            {%else%}
                                                                <a href="{% url 'auction-details' product.id %}" class="bid-btn">Coming Soon</a>
                                                            {%endif%}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                        {% else %}
                                        <div class="col-12">
                                            <p class="text-center mt-3">You haven't added any products yet.</p>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% else %}
                         <ul class="nav nav-pills" id="pills-tab" role="tablist">
                            <li class="nav-item" role="presentation">
                              <button class="nav-link active" id="pills-win-bid-tab" data-bs-toggle="pill" data-bs-target="#pills-win-bid" type="button" role="tab" aria-controls="pills-win-bid" aria-selected="true">
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="13" x="0" y="0" viewBox="0 0 512 512" xml:space="preserve">
                                    <g>
                                        <path
                                            d="M419.84 409.6H92.16c-16.937 0-30.72 13.783-30.72 30.72s13.783 30.72 30.72 30.72h327.68c16.937 0 30.72-13.783 30.72-30.72s-13.783-30.72-30.72-30.72zM471.04 102.4c-22.589 0-40.96 18.371-40.96 40.96 0 15.176 8.397 28.303 20.705 35.389-23.695 56.115-60.662 90.542-95.212 87.429-38.42-3.133-69.755-48.558-87.04-124.559 22.159-5.612 38.666-25.58 38.666-49.459 0-28.242-22.958-51.2-51.2-51.2-28.242 0-51.2 22.958-51.2 51.2 0 23.88 16.507 43.848 38.666 49.459-17.285 76.001-48.62 121.426-87.04 124.559-34.406 3.113-71.537-31.314-95.211-87.429 12.308-7.086 20.705-20.214 20.705-35.389 0-22.589-18.371-40.96-40.96-40.96C18.371 102.4 0 120.771 0 143.36c0 21.013 15.974 38.175 36.372 40.509L75.817 389.12h360.366l39.444-205.251C496.026 181.535 512 164.373 512 143.36c0-22.589-18.371-40.96-40.96-40.96z" opacity="1" data-original="#000000"></path>
                                    </g>
                                </svg>
                                Win Bid
                            </button>
                            </li>

                            <li class="nav-item" role="presentation">
                              <button class="nav-link" id="pills-close-bid-tab" data-bs-toggle="pill" data-bs-target="#pills-close-bid" type="button" role="tab" aria-controls="pills-close-bid" aria-selected="false">
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14" x="0" y="0" viewBox="0 0 48 48" xml:space="preserve">
                                    <g>
                                        <path
                                            d="M24 0a24 24 0 1 0 24 24A24 24 0 0 0 24 0zm10.6 30.66a2.79 2.79 0 1 1-3.94 3.94L24 27.94l-6.66 6.66a2.79 2.79 0 1 1-3.94-3.94L20.06 24l-6.66-6.66a2.79 2.79 0 0 1 3.94-3.94L24 20.06l6.66-6.66a2.79 2.79 0 1 1 3.94 3.94L27.94 24z" opacity="1" data-original="#000000"></path>
                                    </g>
                                </svg>
                                Loss Bid
                            </button>
                            </li>
                            <li class="nav-item" role="presentation">
                              <button class="nav-link" id="pills-payment-bid-tab" data-bs-toggle="pill" data-bs-target="#pills-paymnet-bid" type="button" role="tab" aria-controls="pills-payment-bid" aria-selected="false">
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14" x="0" y="0" viewBox="0 0 48 48" xml:space="preserve">
                                    <g>
                                        <path
                                            d="M24 0a24 24 0 1 0 24 24A24 24 0 0 0 24 0zm10.6 30.66a2.79 2.79 0 1 1-3.94 3.94L24 27.94l-6.66 6.66a2.79 2.79 0 1 1-3.94-3.94L20.06 24l-6.66-6.66a2.79 2.79 0 0 1 3.94-3.94L24 20.06l6.66-6.66a2.79 2.79 0 1 1 3.94 3.94L27.94 24z" opacity="1" data-original="#000000"></path>
                                    </g>
                                </svg>
                                Payment Pending 
                            </button>
                            </li>
                        </ul>
                        
                        <div class="tab-content" id="pills-tabContent">

                            {# ---------------- WINNING BIDS TAB ---------------- #}
                            <div class="tab-pane fade show active" id="pills-win-bid" role="tabpanel">
                                {% if winning_bids %}
                                    <div class="row g-4">
                                        {% for bid in winning_bids %}
                                            {% if bid.product.auction_status == "closed" %}
                                                <div class="col-xl-4 col-lg-6">
                                                    <div class="auction-card style-7">
                                                        <div class="auction-card-img-wrap">
                                                            <a href="{% url 'auction-details' bid.product.id %}" class="card-img">
                                                                {% if bid.product.main_image %}
                                                                <!-- REMOVED width/height attributes and ADDED a class -->
                                                                <img class="product-card-image" src="{{ bid.product.main_image.url }}" alt="{{ product.product_name }}">
                                                                {% else %}
                                                                <img class="product-card-image" src="{% static 'images/default-product.jpg' %}" alt="No image">
                                                                {% endif %}
                                                            </a>
                                                            <div class="batch">
                                                                <span class="win">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="11" height="11" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve">
                                                                        <g>
                                                                            <path
                                                                                d="M419.84 409.6H92.16c-16.937 0-30.72 13.783-30.72 30.72s13.783 30.72 30.72 30.72h327.68c16.937 0 30.72-13.783 30.72-30.72s-13.783-30.72-30.72-30.72zM471.04 102.4c-22.589 0-40.96 18.371-40.96 40.96 0 15.176 8.397 28.303 20.705 35.389-23.695 56.115-60.662 90.542-95.212 87.429-38.42-3.133-69.755-48.558-87.04-124.559 22.159-5.612 38.666-25.58 38.666-49.459 0-28.242-22.958-51.2-51.2-51.2-28.242 0-51.2 22.958-51.2 51.2 0 23.88 16.507 43.848 38.666 49.459-17.285 76.001-48.62 121.426-87.04 124.559-34.406 3.113-71.537-31.314-95.211-87.429 12.308-7.086 20.705-20.214 20.705-35.389 0-22.589-18.371-40.96-40.96-40.96C18.371 102.4 0 120.771 0 143.36c0 21.013 15.974 38.175 36.372 40.509L75.817 389.12h360.366l39.444-205.251C496.026 181.535 512 164.373 512 143.36c0-22.589-18.371-40.96-40.96-40.96z" opacity="1" data-original="#000000"></path>
                                                                        </g>
                                                                    </svg>
                                                                    Win
                                                                </span>
                                                            </div>
                                                            <ul class="view-and-favorite-area">
                                                                <li>
                                                                    <a class="wishlist-toggle-btn 
                                                                        {% if product.id in user_wishlist_products %}active{% endif %}"
                                                                            href="{% url 'toggle_wishlist' bid.product.id %}"
                                                                            aria-label="Toggle Wishlist">
                                
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="14" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                                                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                                                                        </svg>
                                                                    </a>
                                                                </li>
                
                                                                <li>
                                                                    <a href="{% url 'auction-details' bid.product.id%}">
                                                                        <svg width="17" height="11" viewBox="0 0 17 11"
                                                                            xmlns="http://www.w3.org/2000/svg">
                                                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                                                d="M15.4028 5.44118C14.0143 7.8425 11.3811 9.33421 8.53217 9.33421C5.68139 9.33421 3.04821 7.8425 1.65968 5.44118C1.55274 5.25472 1.55274 5.05762 1.65968 4.87132C3.04821 2.47003 5.68139 0.978484 8.53217 0.978484C11.3811 0.978484 14.0143 2.47003 15.4028 4.87132C15.5116 5.05762 15.5116 5.25472 15.4028 5.44118ZM16.2898 4.39522C14.7224 1.68403 11.7499 0 8.53217 0C5.31258 0 2.3401 1.68403 0.772715 4.39522C0.492428 4.87896 0.492428 5.43355 0.772715 5.91693C2.3401 8.62812 5.31258 10.3125 8.53217 10.3125C11.7499 10.3125 14.7224 8.62812 16.2898 5.91693C16.5701 5.43358 16.5701 4.87896 16.2898 4.39522ZM8.53217 7.1634C9.68098 7.1634 10.6159 6.26305 10.6159 5.15617C10.6159 4.04929 9.68098 3.14894 8.53217 3.14894C7.38152 3.14894 6.44663 4.04929 6.44663 5.15617C6.44663 6.26305 7.38156 7.1634 8.53217 7.1634ZM8.53217 2.17045C6.82095 2.17045 5.43061 3.50998 5.43061 5.1562C5.43061 6.80278 6.82098 8.14176 8.53217 8.14176C10.2416 8.14176 11.6319 6.80275 11.6319 5.1562C11.6319 3.50998 10.2416 2.17045 8.53217 2.17045Z" />
                                                                        </svg>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="auction-card-content"> 
                                                            <h6><a href="{% url 'auction-details' bid.product.id %}">{{ bid.product.product_name }}</a></h6>
                                                            <div class="price-and-code-area">
                                                                <div class="price">
                                                                    <span>Winning Bid at:</span>
                                                                    <strong>₹{{ bid.product.current_bid }}</strong>
                                                                </div>
                                                                <a class="bid-btn disabled">
                                                                    Won Bid
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <p class="text-center mt-3">You haven't won any bids yet.</p>
                                {% endif %}
                            </div>

                            {# ---------------- LOSING BIDS TAB ---------------- #}
                            <div class="tab-pane fade" id="pills-close-bid" role="tabpanel">
                                {% if losing_bids %}
                                    <div class="row g-4">
                                        {% for bid in losing_bids %}
                                            <div class="col-xl-4 col-lg-6">
                                                <div class="auction-card style-7">
                                                    <div class="auction-card-img-wrap">
                                                        <a href="{% url 'auction-details' bid.product.id %}" class="card-img">
                                                            {% if bid.product.main_image %}
                                                            <!-- REMOVED width/height attributes and ADDED a class -->
                                                            <img class="product-card-image" src="{{ bid.product.main_image.url }}" alt="{{ product.product_name }}">
                                                            {% else %}
                                                            <img class="product-card-image" src="{% static 'images/default-product.jpg' %}" alt="No image">
                                                            {% endif %}
                                                        </a>
                                                        <div class="batch">
                                                            <span class="close">
                                                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="11" height="11" x="0" y="0" viewBox="0 0 48 48" xml:space="preserve">
                                                                    <g>
                                                                        <path
                                                                            d="M24 0a24 24 0 1 0 24 24A24 24 0 0 0 24 0zm10.6 30.66a2.79 2.79 0 1 1-3.94 3.94L24 27.94l-6.66 6.66a2.79 2.79 0 1 1-3.94-3.94L20.06 24l-6.66-6.66a2.79 2.79 0 0 1 3.94-3.94L24 20.06l6.66-6.66a2.79 2.79 0 1 1 3.94 3.94L27.94 24z" opacity="1" data-original="#000000"></path>
                                                                    </g>
                                                                </svg>
                                                                Losing
                                                            </span>
                                                        </div>
                                                        <ul class="view-and-favorite-area">
                                                                <li>
                                                                    <a class="wishlist-toggle-btn 
                                                                        {% if product.id in user_wishlist_products %}active{% endif %}"
                                                                            href="{% url 'toggle_wishlist' bid.product.id %}"
                                                                            aria-label="Toggle Wishlist">
                                
                                                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="14" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                                                        <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                                                                        </svg>
                                                                    </a>
                                                                </li>
                
                                                                <li>
                                                                    <a href="{% url 'auction-details' bid.product.id%}">
                                                                        <svg width="17" height="11" viewBox="0 0 17 11"
                                                                            xmlns="http://www.w3.org/2000/svg">
                                                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                                                d="M15.4028 5.44118C14.0143 7.8425 11.3811 9.33421 8.53217 9.33421C5.68139 9.33421 3.04821 7.8425 1.65968 5.44118C1.55274 5.25472 1.55274 5.05762 1.65968 4.87132C3.04821 2.47003 5.68139 0.978484 8.53217 0.978484C11.3811 0.978484 14.0143 2.47003 15.4028 4.87132C15.5116 5.05762 15.5116 5.25472 15.4028 5.44118ZM16.2898 4.39522C14.7224 1.68403 11.7499 0 8.53217 0C5.31258 0 2.3401 1.68403 0.772715 4.39522C0.492428 4.87896 0.492428 5.43355 0.772715 5.91693C2.3401 8.62812 5.31258 10.3125 8.53217 10.3125C11.7499 10.3125 14.7224 8.62812 16.2898 5.91693C16.5701 5.43358 16.5701 4.87896 16.2898 4.39522ZM8.53217 7.1634C9.68098 7.1634 10.6159 6.26305 10.6159 5.15617C10.6159 4.04929 9.68098 3.14894 8.53217 3.14894C7.38152 3.14894 6.44663 4.04929 6.44663 5.15617C6.44663 6.26305 7.38156 7.1634 8.53217 7.1634ZM8.53217 2.17045C6.82095 2.17045 5.43061 3.50998 5.43061 5.1562C5.43061 6.80278 6.82098 8.14176 8.53217 8.14176C10.2416 8.14176 11.6319 6.80275 11.6319 5.1562C11.6319 3.50998 10.2416 2.17045 8.53217 2.17045Z" />
                                                                        </svg>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                    </div>
                                                    <div class="auction-card-content"> 
                                                        <h6><a href="{% url 'auction-details' bid.product.id %}">{{ bid.product.product_name }}</a></h6>
                                                        <div class="price-and-code-area">
                                                            <div class="price">
                                                                <span>Last Bid at:</span>
                                                                <strong>₹{{ bid.product.current_bid }}</strong>
                                                            </div>
                                                            <a class="bid-btn disabled">
                                                                Bid Closed
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <p class="text-center mt-3">No lost bids yet — keep trying!</p>
                                {% endif %}
                            </div>

                            {# ---------------- PENDING PAYMENT TAB ---------------- #}
                            <div class="tab-pane fade" id="pills-paymnet-bid" role="tabpanel">
                                {% if pending_payment_products %}
                                    <div class="row g-4">
                                        {% for product in pending_payment_products %}
                                            <div class="auction-card style-7">
                                            <div class="auction-card-img-wrap">
                                                <a href="{% url 'auction-details' product.id %}" class="card-img">
                                                    {% if product.main_image %}
                                                    <!-- REMOVED width/height attributes and ADDED a class -->
                                                    <img class="product-card-image" src="{{ product.main_image.url }}" alt="{{ product.product_name }}">
                                                    {% else %}
                                                    <img class="product-card-image" src="{% static 'images/default-product.jpg' %}" alt="No image">
                                                    {% endif %}
                                                </a>
                                                <div class="batch">
                                                    <span class="win">
                                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="11" height="11" x="0" y="0" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve">
                                                            <g>
                                                                <path
                                                                d="M419.84 409.6H92.16c-16.937 0-30.72 13.783-30.72 30.72s13.783 30.72 30.72 30.72h327.68c16.937 0 30.72-13.783 30.72-30.72s-13.783-30.72-30.72-30.72zM471.04 102.4c-22.589 0-40.96 18.371-40.96 40.96 0 15.176 8.397 28.303 20.705 35.389-23.695 56.115-60.662 90.542-95.212 87.429-38.42-3.133-69.755-48.558-87.04-124.559 22.159-5.612 38.666-25.58 38.666-49.459 0-28.242-22.958-51.2-51.2-51.2-28.242 0-51.2 22.958-51.2 51.2 0 23.88 16.507 43.848 38.666 49.459-17.285 76.001-48.62 121.426-87.04 124.559-34.406 3.113-71.537-31.314-95.211-87.429 12.308-7.086 20.705-20.214 20.705-35.389 0-22.589-18.371-40.96-40.96-40.96C18.371 102.4 0 120.771 0 143.36c0 21.013 15.974 38.175 36.372 40.509L75.817 389.12h360.366l39.444-205.251C496.026 181.535 512 164.373 512 143.36c0-22.589-18.371-40.96-40.96-40.96z" opacity="1" data-original="#000000"></path>
                                                            </g>
                                                        </svg>
                                                        Win
                                                    </span>
                                                </div>
                                                <ul class="view-and-favorite-area">
                                                    <li>
                                                        <a class="wishlist-toggle-btn 
                                                        {% if product.id in user_wishlist_products %}active{% endif %}"
                                                        href="{% url 'toggle_wishlist' product.id %}"
                                                        aria-label="Toggle Wishlist">
                                                        
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="14" fill="currentColor" class="bi bi-heart-fill" viewBox="0 0 16 16">
                                                            <path fill-rule="evenodd" d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"/>
                                                            </svg>
                                                        </a>
                                                    </li>
    
                                                    <li>
                                                        <a href="{% url 'auction-details' product.id%}">
                                                            <svg width="17" height="11" viewBox="0 0 17 11"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path fill-rule="evenodd" clip-rule="evenodd"
                                                            d="M15.4028 5.44118C14.0143 7.8425 11.3811 9.33421 8.53217 9.33421C5.68139 9.33421 3.04821 7.8425 1.65968 5.44118C1.55274 5.25472 1.55274 5.05762 1.65968 4.87132C3.04821 2.47003 5.68139 0.978484 8.53217 0.978484C11.3811 0.978484 14.0143 2.47003 15.4028 4.87132C15.5116 5.05762 15.5116 5.25472 15.4028 5.44118ZM16.2898 4.39522C14.7224 1.68403 11.7499 0 8.53217 0C5.31258 0 2.3401 1.68403 0.772715 4.39522C0.492428 4.87896 0.492428 5.43355 0.772715 5.91693C2.3401 8.62812 5.31258 10.3125 8.53217 10.3125C11.7499 10.3125 14.7224 8.62812 16.2898 5.91693C16.5701 5.43358 16.5701 4.87896 16.2898 4.39522ZM8.53217 7.1634C9.68098 7.1634 10.6159 6.26305 10.6159 5.15617C10.6159 4.04929 9.68098 3.14894 8.53217 3.14894C7.38152 3.14894 6.44663 4.04929 6.44663 5.15617C6.44663 6.26305 7.38156 7.1634 8.53217 7.1634ZM8.53217 2.17045C6.82095 2.17045 5.43061 3.50998 5.43061 5.1562C5.43061 6.80278 6.82098 8.14176 8.53217 8.14176C10.2416 8.14176 11.6319 6.80275 11.6319 5.1562C11.6319 3.50998 10.2416 2.17045 8.53217 2.17045Z" />
                                                        </svg>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                            <div class="auction-card-content"> 
                                                <h6><a href="{% url 'auction-details' product.id %}">{{ product.product_name }}</a></h6>
                                                <div class="price-and-code-area">
                                                    <div class="price">
                                                        <span>Winning Bid at:</span>
                                                        <strong>₹{{ product.current_bid }}</strong>
                                                    </div>
                                                    <a class="bid-btn disabled">
                                                        Won Bid
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <p class="text-center mt-3">No pending payments found.</p>
                                {% endif %}
                            </div>
                        {%endif%}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Dashboard section -->

{%endblock%}
{%block js %}
<script>
  function getCurrentDateTimeLocal() {
    const now = new Date();
    
    // Helper function to pad numbers
    const pad = (num) => (num < 10 ? '0' : '') + num;
    
    // Get date components
    const year = now.getFullYear();
    const month = pad(now.getMonth() + 1);
    const day = pad(now.getDate());
    
    // Get time components
    const hours = pad(now.getHours());
    const minutes = pad(now.getMinutes());
    

    return ${year}-${month}-${day}T${hours}:${minutes};
}

document.addEventListener('DOMContentLoaded', function() {
    const dateTimeInput = document.getElementById('id_auction_start_date_time');
    
    if (dateTimeInput) {
        dateTimeInput.setAttribute('min', getCurrentDateTimeLocal());
    }
});
    document.addEventListener('DOMContentLoaded', function() {
        const dateTimeInput = document.getElementById('id_auction_end_date_time');
        
        if (dateTimeInput) {
            // Set the 'min' attribute to the current local date and time
            dateTimeInput.setAttribute('min', getCurrentDateTimeLocal());
        }
    });
</script>
{%endblock%}